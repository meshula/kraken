{
  "objectType" : "Graph",
  "metadata" : {
    "maya_id" : "2",
    "uiGraphZoom" : "{\n  \"value\" : 0.4283214509487152\n  }",
    "uiGraphPan" : "{\n  \"x\" : 396.8946228027344,\n  \"y\" : 10.86127853393555\n  }"
    },
  "title" : "ZSplineSpineSolver",
  "ports" : [
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "outputs",
      "execPortType" : "Out",
      "typeSpec" : "Mat44[]"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "pelvis",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "torso",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "chest",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "upChest",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "neck",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "rigScale",
      "execPortType" : "In",
      "typeSpec" : "Scalar"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "drawDebug",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "numDeformers",
      "execPortType" : "In",
      "typeSpec" : "Integer"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "pelvisRest",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "torsoRest",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "chestRest",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "upChestRest",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "neckRest",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      }
    ],
  "extDeps" : {
    "Curves" : "*"
    },
  "presetGUID" : "B7EEEBA540222B40C90BB4884E837608",
  "nodes" : [
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-92.1905,\"y\":629.803}"
        },
      "name" : "assemble",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "pelvis"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "torso"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "chest"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "upchest"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "neck"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "metadata" : {
          "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
          "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
          },
        "title" : "asseble",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "pelvis",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "torso",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "chest",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "upchest",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "neck",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "result",
            "execPortType" : "Out",
            "typeSpec" : "Mat44[]"
            }
          ],
        "extDeps" : {},
        "code" : "dfgEntry {
  result.push(pelvis);
  result.push(torso);
  result.push(chest);
  result.push(upchest);
  result.push(neck);
}
"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":776.528,\"y\":244.274}"
        },
      "name" : "GetEmptyDebugShape2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "exec"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "name"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.GetEmptyDebugShape",
      "presetGUID" : "DB3916AA2CE58EEAFAEDB9E2653EF4D6"
      },
    {
      "objectType" : "User",
      "metadata" : {
        "uiTitle" : "Drawing",
        "uiGraphPos" : "{\"x\":753.448,\"y\":80.90900000000001}",
        "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiGraphSize" : "{\"w\":611.199,\"h\":420.479}"
        },
      "name" : "uiBackDropTheDrivenRig22",
      "ports" : []
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":776.9160000000001,\"y\":136.871}",
        "uiCollapsedState" : "0"
        },
      "name" : "CreateSegs",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "color"
          }
        ],
      "executable" : "OSS.Exts.Curves.ZSpline.createSegsOnZSpline",
      "presetGUID" : "D8E844DE0169A7D9BB304C9F8DDF30A2"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1052.66,\"y\":161.581}",
        "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiCollapsedState" : "0"
        },
      "name" : "DrawCurve",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "points"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "color"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "dummyResult"
          }
        ],
      "executable" : "OSS.Exts.Curves.ZSpline.drawCurve",
      "presetGUID" : "B3D1DFFCE15CC7040DCD73D99F2C3098"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":348.036,\"y\":521.46}"
        },
      "name" : "buildZSpline",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "mat44s"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "isSegmentStart"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "clamped"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "weights"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "resolution"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "order"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "defaultValues" : {
            "Boolean" : false
            },
          "name" : "closed"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "defSegs"
          }
        ],
      "executable" : "OSS.Exts.Curves.ZSpline.ZSpline",
      "presetGUID" : "1A4FC39528C5CC9C3EF2B16480BD4E7B"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":556.878,\"y\":544.265}",
        "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiCollapsedState" : "0"
        },
      "name" : "createXfosOnZSpline",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Float32" : 0
            },
          "name" : "keepCurveLen"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Float32" : 1
            },
          "name" : "keepArcLen"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "medianXfos"
          }
        ],
      "executable" : "OSS.Exts.Curves.ZSpline.createXfosOnZSplineSegments",
      "presetGUID" : "9A8AFEEBF71811F541C71B0877BDF45B"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1235.8,\"y\":324.887}"
        },
      "name" : "Add_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "lhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Math.Add",
      "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1336.45,\"y\":742.684}"
        },
      "name" : "convertXfoToMat44",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "xfoArray"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "mat44Array"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "title" : "convertXfoToMat44",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "xfoArray",
            "execPortType" : "In",
            "typeSpec" : "Xfo[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "mat44Array",
            "execPortType" : "Out",
            "typeSpec" : "Mat44[]"
            }
          ],
        "extDeps" : {},
        "code" : "dfgEntry {
  for(UInt32 i=0;i<xfoArray.size();i++)
  {
    mat44Array.push(xfoArray[i].toMat44());
  }
}
"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":182.478,\"y\":831.352}"
        },
      "name" : "Convert_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "size"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "defaultVal"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "title" : "Convert[]",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "result",
            "execPortType" : "Out",
            "typeSpec" : "$TYPEOUT$[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "size",
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "defaultVal",
            "execPortType" : "In",
            "typeSpec" : "$TYPE$"
            }
          ],
        "extDeps" : {},
        "code" : "dfgEntry {
  result.resize(size);
  for(UInt32 i=0;i<size;i++){
     result[i]=defaultVal;
}
}
"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":50.6211,\"y\":817.356}"
        },
      "name" : "Size_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Exts.Geometry.Func.Size",
      "presetGUID" : "3426735D9D96DD0F52A2A961A393053A"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1146.42,\"y\":714.263}"
        },
      "name" : "Set_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "index"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "value"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "metadata" : {
          "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Containers/LocalL4UInt8Array.html",
          "uiTooltip" : "sets the value stored at an index\n\n Supported by LocalL4UInt8Array,LocalL8UInt8Array,LocalL16UInt8Array,LocalL32UInt8Array,LocalL64UInt8Array"
          },
        "title" : "Set",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "IO",
            "name" : "this",
            "execPortType" : "IO",
            "typeSpec" : "$TYPE$[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "index",
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "value",
            "execPortType" : "In",
            "typeSpec" : "$TYPE$"
            }
          ],
        "extDeps" : {
          "Containers" : "*"
          },
        "code" : "require Containers;

dfgEntry {
  this[index] =  value;
}
"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":647.008,\"y\":973.784}"
        },
      "name" : "Sub_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "lhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Math.Sub",
      "presetGUID" : "F9754B19F43BC017056B8BA291E7B8B4"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":499.815,\"y\":975.68}"
        },
      "name" : "UInt32_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "UInt32" : 1
            },
          "name" : "value"
          }
        ],
      "executable" : "Fabric.Core.Constants.UInt32",
      "presetGUID" : "522214488375FF199C3D64A3DBF3C762"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":526.439,\"y\":1097.25}"
        },
      "name" : "ZSplineSpineSolver_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "pelvis"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "torso"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "chest"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "upChest"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "neck"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rigScale"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "drawDebug"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "outputs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "numDeformers"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "referenceCurve"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "SInt32" : 600
            },
          "name" : "defaultVal"
          }
        ],
      "definition" : {
        "objectType" : "Graph",
        "metadata" : {
          "maya_id" : "2",
          "uiGraphZoom" : "{\n  \"value\" : 0.9513480067253113\n  }",
          "uiGraphPan" : "{\n  \"x\" : 62.88127136230469,\n  \"y\" : -207.124755859375\n  }"
          },
        "title" : "ZSplineSpineSolver",
        "ports" : [
          {
            "objectType" : "Port",
            "metadata" : {
              "uiPersistValue" : "true"
              },
            "nodePortType" : "Out",
            "name" : "pelvis",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "metadata" : {
              "uiPersistValue" : "true"
              },
            "nodePortType" : "Out",
            "name" : "torso",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "metadata" : {
              "uiPersistValue" : "true"
              },
            "nodePortType" : "Out",
            "name" : "chest",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "metadata" : {
              "uiPersistValue" : "true"
              },
            "nodePortType" : "Out",
            "name" : "upChest",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "metadata" : {
              "uiPersistValue" : "true"
              },
            "nodePortType" : "Out",
            "name" : "neck",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "metadata" : {
              "uiPersistValue" : "true"
              },
            "nodePortType" : "Out",
            "name" : "rigScale",
            "execPortType" : "In",
            "typeSpec" : "Scalar"
            },
          {
            "objectType" : "Port",
            "metadata" : {
              "uiPersistValue" : "true"
              },
            "nodePortType" : "Out",
            "name" : "drawDebug",
            "execPortType" : "In",
            "typeSpec" : "Boolean"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "outputs",
            "execPortType" : "Out",
            "typeSpec" : "Mat44[]"
            },
          {
            "objectType" : "Port",
            "metadata" : {
              "uiPersistValue" : "true"
              },
            "nodePortType" : "Out",
            "name" : "numDeformers",
            "execPortType" : "In",
            "typeSpec" : "Integer"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "result",
            "execPortType" : "Out",
            "typeSpec" : "Vec3"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "referenceCurve",
            "execPortType" : "In",
            "typeSpec" : "ZSpline"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "defaultVal",
            "execPortType" : "In",
            "typeSpec" : "Integer"
            }
          ],
        "extDeps" : {
          "Math" : "*"
          },
        "nodes" : [
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":34.7672,\"y\":325.421}"
              },
            "name" : "assemble",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "pelvis"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "torso"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "chest"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "upchest"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "neck"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "metadata" : {
                "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
                },
              "title" : "asseble",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "pelvis",
                  "execPortType" : "In",
                  "typeSpec" : "Mat44"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "torso",
                  "execPortType" : "In",
                  "typeSpec" : "Mat44"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "chest",
                  "execPortType" : "In",
                  "typeSpec" : "Mat44"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "upchest",
                  "execPortType" : "In",
                  "typeSpec" : "Mat44"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "neck",
                  "execPortType" : "In",
                  "typeSpec" : "Mat44"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "result",
                  "execPortType" : "Out",
                  "typeSpec" : "Mat44[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  result.push(pelvis);
  result.push(torso);
  result.push(chest);
  result.push(upchest);
  result.push(neck);
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":776.528,\"y\":244.274}"
              },
            "name" : "GetEmptyDebugShape2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "exec"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "name"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.GetEmptyDebugShape",
            "presetGUID" : "DB3916AA2CE58EEAFAEDB9E2653EF4D6"
            },
          {
            "objectType" : "User",
            "metadata" : {
              "uiTitle" : "Drawing",
              "uiGraphPos" : "{\"x\":753.448,\"y\":80.90900000000001}",
              "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
              "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
              "uiGraphSize" : "{\"w\":611.199,\"h\":420.479}"
              },
            "name" : "uiBackDropTheDrivenRig22",
            "ports" : []
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":555.883,\"y\":369.326}"
              },
            "name" : "EmptyDrawingHandle",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "handle"
                }
              ],
            "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle",
            "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":776.9160000000001,\"y\":136.871}",
              "uiCollapsedState" : "0"
              },
            "name" : "CreateSegs",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "color"
                }
              ],
            "executable" : "OSS.Exts.Curves.ZSpline.createSegsOnZSpline",
            "presetGUID" : "D8E844DE0169A7D9BB304C9F8DDF30A2"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":1052.66,\"y\":161.581}",
              "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
              "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
              "uiCollapsedState" : "0"
              },
            "name" : "DrawCurve",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "points"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "color"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "dummyResult"
                }
              ],
            "executable" : "OSS.Exts.Curves.ZSpline.drawCurve",
            "presetGUID" : "B3D1DFFCE15CC7040DCD73D99F2C3098"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":310.545,\"y\":415.196}"
              },
            "name" : "buildZSpline",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "mat44s"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "isSegmentStart"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "clamped"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "weights"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "resolution"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "order"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "closed"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "defSegs"
                }
              ],
            "executable" : "OSS.Exts.Curves.ZSpline.ZSpline",
            "presetGUID" : "1A4FC39528C5CC9C3EF2B16480BD4E7B"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":1037.15,\"y\":323.474}"
              },
            "name" : "DrawAxesInstances",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "exec"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "String" : "a"
                  },
                "name" : "name"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "transforms"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "dummyResult"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "instance"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "metadata" : {
                "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
                "uiTooltip" : "helper function to draw axes at given transforms\n\n Supported by DrawingHandle"
                },
              "title" : "DrawAxesInstances",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "IO",
                  "name" : "exec",
                  "execPortType" : "IO",
                  "typeSpec" : "Execute"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "IO",
                  "name" : "this",
                  "execPortType" : "IO",
                  "typeSpec" : "DrawingHandle"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "name",
                  "execPortType" : "In",
                  "typeSpec" : "String"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
                    },
                  "nodePortType" : "Out",
                  "name" : "transforms",
                  "execPortType" : "In",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
                    },
                  "nodePortType" : "In",
                  "name" : "dummyResult",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "instance",
                  "execPortType" : "Out",
                  "typeSpec" : "InlineInstance"
                  }
                ],
              "extDeps" : {
                "InlineDrawing" : "*",
                "FabricInterfaces" : "*"
                },
              "code" : "require InlineDrawing;

dfgEntry {
  this.drawAxesInstances(name, transforms, dummyResult, instance);
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":529.696,\"y\":492.658}",
              "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
              "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
              "uiCollapsedState" : "0"
              },
            "name" : "createXfosOnZSpline",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 0
                  },
                "name" : "keepCurveLen"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 1
                  },
                "name" : "keepArcLen"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "medianXfos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "referenceCurve"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 1
                  },
                "name" : "compressionAmt"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "metadata" : {
                "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
                },
              "title" : "createXfosOnZSplineSegments",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "this",
                  "execPortType" : "In",
                  "typeSpec" : "ZSpline"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "result",
                  "execPortType" : "Out",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "defaultValues" : {
                    "Float32" : 0
                    },
                  "name" : "keepCurveLen",
                  "execPortType" : "In",
                  "typeSpec" : "Scalar"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "defaultValues" : {
                    "Float32" : 1
                    },
                  "name" : "keepArcLen",
                  "execPortType" : "In",
                  "typeSpec" : "Scalar"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "medianXfos",
                  "execPortType" : "Out",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "referenceCurve",
                  "execPortType" : "In",
                  "typeSpec" : "ZSpline"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "compressionAmt",
                  "execPortType" : "In",
                  "typeSpec" : "Scalar"
                  }
                ],
              "extDeps" : {
                "Math" : "*"
                },
              "code" : "dfgEntry {
  result.resize(0);
  for(UInt32 n=0;n<this.BSplines.size();n++){
    for(UInt32 k=0; k<this.BSplines[n].defSegs; k++) {
        Scalar t =  Scalar(k)/ Scalar(Math_max(1,(this.BSplines[n].defSegs-1)));
        Vec3 scale = this.BSplines[n].evalScale(t,0,keepCurveLen);
        if(compressionAmt>0) {
          Scalar compression = this.BSplines[n].evalCompression(t, referenceCurve.BSplines[n]);
          scale = scale*compression.linearInterpolate(1,1-compressionAmt);
        }
        
        Xfo outXfo = Xfo(
                this.BSplines[n].evalPosition(t,keepArcLen,keepCurveLen),
                this.BSplines[n].evalOri(t,keepArcLen,keepCurveLen),
                scale);
        result.push(outXfo);
        
        // export on mid segments
        if(k==0 && n!=0) {
            medianXfos.push(outXfo.linearInterpolate(result[result.size()-2], 0.5));
           // ToDo Export defrobulated Euler Angles on segment Joints
        }
    }
  }
}  "
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":1235.3,\"y\":324.887}"
              },
            "name" : "Add_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "lhs"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "rhs"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Core.Math.Add",
            "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":852.37,\"y\":655.962}"
              },
            "name" : "convertXfoToMat44",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "xfoArray"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "mat44Array"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "convertXfoToMat44",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "xfoArray",
                  "execPortType" : "In",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "mat44Array",
                  "execPortType" : "Out",
                  "typeSpec" : "Mat44[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  for(UInt32 i=0;i<xfoArray.size();i++)
  {
    mat44Array.push(xfoArray[i].toMat44());
  }
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":847.92,\"y\":576.005}"
              },
            "name" : "convertXfoToMat44_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "xfoArray"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "mat44Array"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "convertXfoToMat44",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "xfoArray",
                  "execPortType" : "In",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "mat44Array",
                  "execPortType" : "Out",
                  "typeSpec" : "Mat44[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  for(UInt32 i=0;i<xfoArray.size();i++)
  {
    mat44Array.push(xfoArray[i].toMat44());
  }
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":207.0,\"y\":711.0}"
              },
            "name" : "Convert_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "size"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "defaultVal"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "Convert[]",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "result",
                  "execPortType" : "Out",
                  "typeSpec" : "$TYPEOUT$[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "size",
                  "execPortType" : "In",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "defaultVal",
                  "execPortType" : "In",
                  "typeSpec" : "$TYPE$"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  result.resize(size);
  for(UInt32 i=0;i<size;i++){
     result[i]=defaultVal;
  }
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":140.0,\"y\":538.0}"
              },
            "name" : "Size_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.Geometry.Func.Size",
            "presetGUID" : "3426735D9D96DD0F52A2A961A393053A"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":56.0,\"y\":781.0}",
              "uiCollapsedState" : "0"
              },
            "name" : "Convert_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "size"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "defaultVal"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "Convert[]",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "result",
                  "execPortType" : "Out",
                  "typeSpec" : "$TYPEOUT$[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "size",
                  "execPortType" : "In",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "defaultVal",
                  "execPortType" : "In",
                  "typeSpec" : "$TYPE$"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  result.resize(size);
  for(UInt32 i=0;i<size;i++){
     result[i]=defaultVal;
  }
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":69.0,\"y\":655.0}",
              "uiCollapsedState" : "0"
              },
            "name" : "Size_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.Geometry.Func.Size",
            "presetGUID" : "3426735D9D96DD0F52A2A961A393053A"
            }
          ],
        "connections" : {
          "pelvis" : [
            "assemble.pelvis"
            ],
          "torso" : [
            "assemble.torso"
            ],
          "chest" : [
            "assemble.chest"
            ],
          "upChest" : [
            "assemble.upchest"
            ],
          "neck" : [
            "assemble.neck"
            ],
          "numDeformers" : [
            "Convert_2.defaultVal"
            ],
          "referenceCurve" : [
            "createXfosOnZSpline.referenceCurve"
            ],
          "defaultVal" : [
            "Convert_3.defaultVal"
            ],
          "assemble.result" : [
            "buildZSpline.mat44s",
            "Size_1.this",
            "Size_2.this"
            ],
          "GetEmptyDebugShape2.result" : [
            "DrawCurve.this"
            ],
          "EmptyDrawingHandle.handle" : [
            "GetEmptyDebugShape2.this",
            "DrawAxesInstances.this"
            ],
          "CreateSegs.result" : [
            "DrawCurve.points"
            ],
          "CreateSegs.color" : [
            "DrawCurve.color"
            ],
          "DrawCurve.dummyResult" : [
            "Add_1.lhs"
            ],
          "buildZSpline.result" : [
            "createXfosOnZSpline.this",
            "CreateSegs.this"
            ],
          "DrawAxesInstances.dummyResult" : [
            "Add_1.rhs"
            ],
          "createXfosOnZSpline.result" : [
            "convertXfoToMat44_2.xfoArray",
            "DrawAxesInstances.transforms"
            ],
          "createXfosOnZSpline.medianXfos" : [
            "convertXfoToMat44.xfoArray"
            ],
          "Add_1.result" : [
            "result"
            ],
          "convertXfoToMat44_2.mat44Array" : [
            "outputs"
            ],
          "Convert_2.result" : [
            "buildZSpline.defSegs"
            ],
          "Size_1.result" : [
            "Convert_2.size"
            ],
          "Convert_3.result" : [
            "buildZSpline.resolution"
            ],
          "Size_2.result" : [
            "Convert_3.size"
            ]
          }
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-131.73,\"y\":925.221}"
        },
      "name" : "assemble_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "pelvis"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "torso"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "chest"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "upchest"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "neck"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "metadata" : {
          "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
          "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
          },
        "title" : "asseble",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "pelvis",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "torso",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "chest",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "upchest",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "neck",
            "execPortType" : "In",
            "typeSpec" : "Mat44"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "result",
            "execPortType" : "Out",
            "typeSpec" : "Mat44[]"
            }
          ],
        "extDeps" : {},
        "code" : "dfgEntry {
  result.push(pelvis);
  result.push(torso);
  result.push(chest);
  result.push(upchest);
  result.push(neck);
}
"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":195.051,\"y\":998.554}"
        },
      "name" : "buildZSpline_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "mat44s"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "isSegmentStart"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "clamped"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "weights"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "resolution"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "order"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "closed"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "defSegs"
          }
        ],
      "executable" : "OSS.Exts.Curves.ZSpline.ZSpline",
      "presetGUID" : "1A4FC39528C5CC9C3EF2B16480BD4E7B"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":594.982,\"y\":1538.69}",
        "uiCollapsedState" : "0"
        },
      "name" : "Convert_3",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "size"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "defaultVal"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "title" : "Convert[]",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "result",
            "execPortType" : "Out",
            "typeSpec" : "$TYPEOUT$[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "size",
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "defaultVal",
            "execPortType" : "In",
            "typeSpec" : "$TYPE$"
            }
          ],
        "extDeps" : {},
        "code" : "dfgEntry {
  result.resize(size);
  for(UInt32 i=0;i<size;i++){
     result[i]=defaultVal;
  }
}
"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":464.982,\"y\":1443.69}",
        "uiCollapsedState" : "0"
        },
      "name" : "Size_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Exts.Geometry.Func.Size",
      "presetGUID" : "3426735D9D96DD0F52A2A961A393053A"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":280.982,\"y\":1497.6}"
        },
      "name" : "Scalar_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Float32" : 50
            },
          "name" : "value"
          }
        ],
      "executable" : "Fabric.Core.Constants.Scalar",
      "presetGUID" : "E0E96C6E234F70063BC98887B83327DC"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":577.49,\"y\":751.0119999999999}",
        "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiCollapsedState" : "0"
        },
      "name" : "createXfosOnZSpline_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Float32" : 0
            },
          "name" : "keepCurveLen"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Float32" : 1
            },
          "name" : "keepArcLen"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "medianXfos"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "referenceCurve"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Float32" : 1
            },
          "name" : "compressionAmt"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "metadata" : {
          "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
          "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
          },
        "title" : "createXfosOnZSplineSegments",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "this",
            "execPortType" : "In",
            "typeSpec" : "ZSpline"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "result",
            "execPortType" : "Out",
            "typeSpec" : "Xfo[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 0
              },
            "name" : "keepCurveLen",
            "execPortType" : "In",
            "typeSpec" : "Scalar"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 1
              },
            "name" : "keepArcLen",
            "execPortType" : "In",
            "typeSpec" : "Scalar"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "medianXfos",
            "execPortType" : "Out",
            "typeSpec" : "Xfo[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "referenceCurve",
            "execPortType" : "In",
            "typeSpec" : "ZSpline"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "compressionAmt",
            "execPortType" : "In",
            "typeSpec" : "Scalar"
            }
          ],
        "extDeps" : {
          "Math" : "*"
          },
        "code" : "dfgEntry {
  result.resize(0);
  for(UInt32 n=0;n<this.BSplines.size();n++){
    for(UInt32 k=0; k<this.BSplines[n].defSegs; k++) {
        Scalar t =  Scalar(k)/ Scalar(Math_max(1,(this.BSplines[n].defSegs-1)));
        Vec3 scale = this.BSplines[n].evalScale(t,0,keepCurveLen);
        if(compressionAmt>0) {
          Scalar compression = this.BSplines[n].evalCompression(t, referenceCurve.BSplines[n]);
          scale = scale*compression.linearInterpolate(1,1-compressionAmt);
        }
        
        Xfo outXfo = Xfo(
                this.BSplines[n].evalPosition(t,keepArcLen,keepCurveLen),
                this.BSplines[n].evalOri(t,keepArcLen,keepCurveLen),
                scale);
        result.push(outXfo);
        
        // export on mid segments
        if(k==0 && n!=0) {
            medianXfos.push(outXfo.linearInterpolate(result[result.size()-2], 0.5));
           // ToDo Export defrobulated Euler Angles on segment Joints
        }
    }
  }
}  "
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":853.814,\"y\":980.4210000000001}"
        },
      "name" : "SetFromMat44_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "m"
          }
        ],
      "executable" : "Fabric.Exts.Math.Xfo.SetFromMat44",
      "presetGUID" : "59B1B738E9402F3006B2516B14A43848"
      }
    ],
  "connections" : {
    "pelvis" : [
      "assemble.pelvis"
      ],
    "torso" : [
      "assemble.torso"
      ],
    "chest" : [
      "assemble.chest"
      ],
    "upChest" : [
      "assemble.upchest"
      ],
    "neck" : [
      "assemble.neck",
      "SetFromMat44_1.m"
      ],
    "numDeformers" : [
      "Convert_2.defaultVal"
      ],
    "pelvisRest" : [
      "assemble_2.pelvis"
      ],
    "torsoRest" : [
      "assemble_2.torso"
      ],
    "chestRest" : [
      "assemble_2.chest"
      ],
    "upChestRest" : [
      "assemble_2.upchest"
      ],
    "neckRest" : [
      "assemble_2.neck"
      ],
    "assemble.result" : [
      "buildZSpline.mat44s",
      "Size_1.this"
      ],
    "GetEmptyDebugShape2.result" : [
      "DrawCurve.this"
      ],
    "CreateSegs.result" : [
      "DrawCurve.points"
      ],
    "CreateSegs.color" : [
      "DrawCurve.color"
      ],
    "DrawCurve.dummyResult" : [
      "Add_1.lhs"
      ],
    "buildZSpline.result" : [
      "createXfosOnZSpline.this",
      "createXfosOnZSpline_2.this"
      ],
    "convertXfoToMat44.mat44Array" : [
      "outputs"
      ],
    "Convert_2.result" : [
      "buildZSpline.defSegs"
      ],
    "Size_1.result" : [
      "Convert_2.size"
      ],
    "Set_1.this" : [
      "convertXfoToMat44.xfoArray"
      ],
    "Sub_1.result" : [
      "Set_1.index"
      ],
    "UInt32_1.value" : [
      "Sub_1.rhs"
      ],
    "assemble_2.result" : [
      "buildZSpline_2.mat44s",
      "Size_2.this"
      ],
    "buildZSpline_2.result" : [
      "createXfosOnZSpline_2.referenceCurve",
      "ZSplineSpineSolver_1.referenceCurve"
      ],
    "Convert_3.result" : [
      "buildZSpline_2.resolution"
      ],
    "Size_2.result" : [
      "Convert_3.size"
      ],
    "Scalar_1.value" : [
      "Convert_3.defaultVal",
      "ZSplineSpineSolver_1.defaultVal"
      ],
    "createXfosOnZSpline_2.result" : [
      "Set_1.this"
      ],
    "SetFromMat44_1.this" : [
      "Set_1.value"
      ]
    },
  "requiredPresets" : {
    "OSS.Solvers.ZSplineSpineSolver" : {
      "objectType" : "Graph",
      "metadata" : {
        "maya_id" : "2",
        "uiGraphZoom" : "{\n  \"value\" : 0.4283214509487152\n  }",
        "uiGraphPan" : "{\n  \"x\" : 396.8946228027344,\n  \"y\" : 10.86127853393555\n  }"
        },
      "title" : "ZSplineSpineSolver",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "outputs",
          "execPortType" : "Out",
          "typeSpec" : "Mat44[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "pelvis",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiPersistValue" : "true"
            },
          "nodePortType" : "Out",
          "name" : "torso",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiPersistValue" : "true"
            },
          "nodePortType" : "Out",
          "name" : "chest",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiPersistValue" : "true"
            },
          "nodePortType" : "Out",
          "name" : "upChest",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiPersistValue" : "true"
            },
          "nodePortType" : "Out",
          "name" : "neck",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiPersistValue" : "true"
            },
          "nodePortType" : "Out",
          "name" : "rigScale",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiPersistValue" : "true"
            },
          "nodePortType" : "Out",
          "name" : "drawDebug",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiPersistValue" : "true"
            },
          "nodePortType" : "Out",
          "name" : "numDeformers",
          "execPortType" : "In",
          "typeSpec" : "Integer"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "pelvisRest",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "torsoRest",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "chestRest",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "upChestRest",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "neckRest",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          }
        ],
      "extDeps" : {
        "Curves" : "*"
        },
      "presetGUID" : "B7EEEBA540222B40C90BB4884E837608",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":-92.1905,\"y\":629.803}"
            },
          "name" : "assemble",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "pelvis"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "torso"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "chest"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "upchest"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "neck"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "metadata" : {
              "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
              "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
              },
            "title" : "asseble",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "pelvis",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "torso",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "chest",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "upchest",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "neck",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "result",
                "execPortType" : "Out",
                "typeSpec" : "Mat44[]"
                }
              ],
            "extDeps" : {},
            "code" : "dfgEntry {
  result.push(pelvis);
  result.push(torso);
  result.push(chest);
  result.push(upchest);
  result.push(neck);
}
"
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":776.528,\"y\":244.274}"
            },
          "name" : "GetEmptyDebugShape2",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "exec"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "name"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.GetEmptyDebugShape",
          "presetGUID" : "DB3916AA2CE58EEAFAEDB9E2653EF4D6"
          },
        {
          "objectType" : "User",
          "metadata" : {
            "uiTitle" : "Drawing",
            "uiGraphPos" : "{\"x\":753.448,\"y\":80.90900000000001}",
            "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
            "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
            "uiGraphSize" : "{\"w\":611.199,\"h\":420.479}"
            },
          "name" : "uiBackDropTheDrivenRig22",
          "ports" : []
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":776.9160000000001,\"y\":136.871}",
            "uiCollapsedState" : "0"
            },
          "name" : "CreateSegs",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "color"
              }
            ],
          "executable" : "OSS.Exts.Curves.ZSpline.createSegsOnZSpline",
          "presetGUID" : "D8E844DE0169A7D9BB304C9F8DDF30A2"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":1052.66,\"y\":161.581}",
            "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
            "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
            "uiCollapsedState" : "0"
            },
          "name" : "DrawCurve",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "points"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "color"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "dummyResult"
              }
            ],
          "executable" : "OSS.Exts.Curves.ZSpline.drawCurve",
          "presetGUID" : "B3D1DFFCE15CC7040DCD73D99F2C3098"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":348.036,\"y\":521.46}"
            },
          "name" : "buildZSpline",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "mat44s"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "isSegmentStart"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "clamped"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "weights"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "resolution"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "order"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "defaultValues" : {
                "Boolean" : false
                },
              "name" : "closed"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "defSegs"
              }
            ],
          "executable" : "OSS.Exts.Curves.ZSpline.ZSpline",
          "presetGUID" : "1A4FC39528C5CC9C3EF2B16480BD4E7B"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":556.878,\"y\":544.265}",
            "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
            "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
            "uiCollapsedState" : "0"
            },
          "name" : "createXfosOnZSpline",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 0
                },
              "name" : "keepCurveLen"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 1
                },
              "name" : "keepArcLen"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "medianXfos"
              }
            ],
          "executable" : "OSS.Exts.Curves.ZSpline.createXfosOnZSplineSegments",
          "presetGUID" : "9A8AFEEBF71811F541C71B0877BDF45B"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":1235.8,\"y\":324.887}"
            },
          "name" : "Add_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "lhs"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "rhs"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "executable" : "Fabric.Core.Math.Add",
          "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":1336.45,\"y\":742.684}"
            },
          "name" : "convertXfoToMat44",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "xfoArray"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "mat44Array"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "title" : "convertXfoToMat44",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "xfoArray",
                "execPortType" : "In",
                "typeSpec" : "Xfo[]"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "mat44Array",
                "execPortType" : "Out",
                "typeSpec" : "Mat44[]"
                }
              ],
            "extDeps" : {},
            "code" : "dfgEntry {
  for(UInt32 i=0;i<xfoArray.size();i++)
  {
    mat44Array.push(xfoArray[i].toMat44());
  }
}
"
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":182.478,\"y\":831.352}"
            },
          "name" : "Convert_2",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "size"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "defaultVal"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "title" : "Convert[]",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "result",
                "execPortType" : "Out",
                "typeSpec" : "$TYPEOUT$[]"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "size",
                "execPortType" : "In",
                "typeSpec" : "UInt32"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "defaultVal",
                "execPortType" : "In",
                "typeSpec" : "$TYPE$"
                }
              ],
            "extDeps" : {},
            "code" : "dfgEntry {
  result.resize(size);
  for(UInt32 i=0;i<size;i++){
     result[i]=defaultVal;
}
}
"
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":50.6211,\"y\":817.356}"
            },
          "name" : "Size_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "executable" : "Fabric.Exts.Geometry.Func.Size",
          "presetGUID" : "3426735D9D96DD0F52A2A961A393053A"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":1146.42,\"y\":714.263}"
            },
          "name" : "Set_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "index"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "value"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "metadata" : {
              "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Containers/LocalL4UInt8Array.html",
              "uiTooltip" : "sets the value stored at an index\n\n Supported by LocalL4UInt8Array,LocalL8UInt8Array,LocalL16UInt8Array,LocalL32UInt8Array,LocalL64UInt8Array"
              },
            "title" : "Set",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "IO",
                "name" : "this",
                "execPortType" : "IO",
                "typeSpec" : "$TYPE$[]"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "index",
                "execPortType" : "In",
                "typeSpec" : "UInt32"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "value",
                "execPortType" : "In",
                "typeSpec" : "$TYPE$"
                }
              ],
            "extDeps" : {
              "Containers" : "*"
              },
            "code" : "require Containers;

dfgEntry {
  this[index] =  value;
}
"
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":647.008,\"y\":973.784}"
            },
          "name" : "Sub_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "lhs"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "rhs"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "executable" : "Fabric.Core.Math.Sub",
          "presetGUID" : "F9754B19F43BC017056B8BA291E7B8B4"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":499.815,\"y\":975.68}"
            },
          "name" : "UInt32_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "defaultValues" : {
                "UInt32" : 1
                },
              "name" : "value"
              }
            ],
          "executable" : "Fabric.Core.Constants.UInt32",
          "presetGUID" : "522214488375FF199C3D64A3DBF3C762"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":526.439,\"y\":1097.25}"
            },
          "name" : "ZSplineSpineSolver_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "pelvis"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "torso"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "chest"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "upChest"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "neck"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "rigScale"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "drawDebug"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "outputs"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "numDeformers"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "referenceCurve"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "defaultValues" : {
                "SInt32" : 600
                },
              "name" : "defaultVal"
              }
            ],
          "definition" : {
            "objectType" : "Graph",
            "metadata" : {
              "maya_id" : "2",
              "uiGraphZoom" : "{\n  \"value\" : 0.9513480067253113\n  }",
              "uiGraphPan" : "{\n  \"x\" : 62.88127136230469,\n  \"y\" : -207.124755859375\n  }"
              },
            "title" : "ZSplineSpineSolver",
            "ports" : [
              {
                "objectType" : "Port",
                "metadata" : {
                  "uiPersistValue" : "true"
                  },
                "nodePortType" : "Out",
                "name" : "pelvis",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "metadata" : {
                  "uiPersistValue" : "true"
                  },
                "nodePortType" : "Out",
                "name" : "torso",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "metadata" : {
                  "uiPersistValue" : "true"
                  },
                "nodePortType" : "Out",
                "name" : "chest",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "metadata" : {
                  "uiPersistValue" : "true"
                  },
                "nodePortType" : "Out",
                "name" : "upChest",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "metadata" : {
                  "uiPersistValue" : "true"
                  },
                "nodePortType" : "Out",
                "name" : "neck",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "metadata" : {
                  "uiPersistValue" : "true"
                  },
                "nodePortType" : "Out",
                "name" : "rigScale",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "Port",
                "metadata" : {
                  "uiPersistValue" : "true"
                  },
                "nodePortType" : "Out",
                "name" : "drawDebug",
                "execPortType" : "In",
                "typeSpec" : "Boolean"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "outputs",
                "execPortType" : "Out",
                "typeSpec" : "Mat44[]"
                },
              {
                "objectType" : "Port",
                "metadata" : {
                  "uiPersistValue" : "true"
                  },
                "nodePortType" : "Out",
                "name" : "numDeformers",
                "execPortType" : "In",
                "typeSpec" : "Integer"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "result",
                "execPortType" : "Out",
                "typeSpec" : "Vec3"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "referenceCurve",
                "execPortType" : "In",
                "typeSpec" : "ZSpline"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "defaultVal",
                "execPortType" : "In",
                "typeSpec" : "Integer"
                }
              ],
            "extDeps" : {
              "Math" : "*"
              },
            "nodes" : [
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":34.7672,\"y\":325.421}"
                  },
                "name" : "assemble",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "pelvis"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "torso"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "chest"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "upchest"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "neck"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    }
                  ],
                "definition" : {
                  "objectType" : "Func",
                  "metadata" : {
                    "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                    "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
                    },
                  "title" : "asseble",
                  "ports" : [
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "pelvis",
                      "execPortType" : "In",
                      "typeSpec" : "Mat44"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "torso",
                      "execPortType" : "In",
                      "typeSpec" : "Mat44"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "chest",
                      "execPortType" : "In",
                      "typeSpec" : "Mat44"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "upchest",
                      "execPortType" : "In",
                      "typeSpec" : "Mat44"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "neck",
                      "execPortType" : "In",
                      "typeSpec" : "Mat44"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "In",
                      "name" : "result",
                      "execPortType" : "Out",
                      "typeSpec" : "Mat44[]"
                      }
                    ],
                  "extDeps" : {},
                  "code" : "dfgEntry {
  result.push(pelvis);
  result.push(torso);
  result.push(chest);
  result.push(upchest);
  result.push(neck);
}
"
                  }
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":776.528,\"y\":244.274}"
                  },
                "name" : "GetEmptyDebugShape2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "exec"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "this"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "name"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    }
                  ],
                "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.GetEmptyDebugShape",
                "presetGUID" : "DB3916AA2CE58EEAFAEDB9E2653EF4D6"
                },
              {
                "objectType" : "User",
                "metadata" : {
                  "uiTitle" : "Drawing",
                  "uiGraphPos" : "{\"x\":753.448,\"y\":80.90900000000001}",
                  "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
                  "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                  "uiGraphSize" : "{\"w\":611.199,\"h\":420.479}"
                  },
                "name" : "uiBackDropTheDrivenRig22",
                "ports" : []
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":555.883,\"y\":369.326}"
                  },
                "name" : "EmptyDrawingHandle",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "handle"
                    }
                  ],
                "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle",
                "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":776.9160000000001,\"y\":136.871}",
                  "uiCollapsedState" : "0"
                  },
                "name" : "CreateSegs",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "this"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "color"
                    }
                  ],
                "executable" : "OSS.Exts.Curves.ZSpline.createSegsOnZSpline",
                "presetGUID" : "D8E844DE0169A7D9BB304C9F8DDF30A2"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":1052.66,\"y\":161.581}",
                  "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
                  "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                  "uiCollapsedState" : "0"
                  },
                "name" : "DrawCurve",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "points"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "color"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "this"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "dummyResult"
                    }
                  ],
                "executable" : "OSS.Exts.Curves.ZSpline.drawCurve",
                "presetGUID" : "B3D1DFFCE15CC7040DCD73D99F2C3098"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":310.545,\"y\":415.196}"
                  },
                "name" : "buildZSpline",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "mat44s"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "isSegmentStart"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "clamped"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "weights"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "resolution"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "order"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "closed"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "defSegs"
                    }
                  ],
                "executable" : "OSS.Exts.Curves.ZSpline.ZSpline",
                "presetGUID" : "1A4FC39528C5CC9C3EF2B16480BD4E7B"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":1037.15,\"y\":323.474}"
                  },
                "name" : "DrawAxesInstances",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "exec"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "IO",
                    "name" : "this"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "defaultValues" : {
                      "String" : "a"
                      },
                    "name" : "name"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "transforms"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "dummyResult"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "instance"
                    }
                  ],
                "definition" : {
                  "objectType" : "Func",
                  "metadata" : {
                    "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
                    "uiTooltip" : "helper function to draw axes at given transforms\n\n Supported by DrawingHandle"
                    },
                  "title" : "DrawAxesInstances",
                  "ports" : [
                    {
                      "objectType" : "Port",
                      "nodePortType" : "IO",
                      "name" : "exec",
                      "execPortType" : "IO",
                      "typeSpec" : "Execute"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "IO",
                      "name" : "this",
                      "execPortType" : "IO",
                      "typeSpec" : "DrawingHandle"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "name",
                      "execPortType" : "In",
                      "typeSpec" : "String"
                      },
                    {
                      "objectType" : "Port",
                      "metadata" : {
                        "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
                        },
                      "nodePortType" : "Out",
                      "name" : "transforms",
                      "execPortType" : "In",
                      "typeSpec" : "Xfo[]"
                      },
                    {
                      "objectType" : "Port",
                      "metadata" : {
                        "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
                        },
                      "nodePortType" : "In",
                      "name" : "dummyResult",
                      "execPortType" : "Out",
                      "typeSpec" : "Vec3"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "In",
                      "name" : "instance",
                      "execPortType" : "Out",
                      "typeSpec" : "InlineInstance"
                      }
                    ],
                  "extDeps" : {
                    "InlineDrawing" : "*",
                    "FabricInterfaces" : "*"
                    },
                  "code" : "require InlineDrawing;

dfgEntry {
  this.drawAxesInstances(name, transforms, dummyResult, instance);
}
"
                  }
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":529.696,\"y\":492.658}",
                  "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
                  "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                  "uiCollapsedState" : "0"
                  },
                "name" : "createXfosOnZSpline",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "this"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "defaultValues" : {
                      "Float32" : 0
                      },
                    "name" : "keepCurveLen"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "defaultValues" : {
                      "Float32" : 1
                      },
                    "name" : "keepArcLen"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "medianXfos"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "referenceCurve"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "defaultValues" : {
                      "Float32" : 1
                      },
                    "name" : "compressionAmt"
                    }
                  ],
                "definition" : {
                  "objectType" : "Func",
                  "metadata" : {
                    "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                    "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
                    },
                  "title" : "createXfosOnZSplineSegments",
                  "ports" : [
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "this",
                      "execPortType" : "In",
                      "typeSpec" : "ZSpline"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "In",
                      "name" : "result",
                      "execPortType" : "Out",
                      "typeSpec" : "Xfo[]"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "defaultValues" : {
                        "Float32" : 0
                        },
                      "name" : "keepCurveLen",
                      "execPortType" : "In",
                      "typeSpec" : "Scalar"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "keepArcLen",
                      "execPortType" : "In",
                      "typeSpec" : "Scalar"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "In",
                      "name" : "medianXfos",
                      "execPortType" : "Out",
                      "typeSpec" : "Xfo[]"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "referenceCurve",
                      "execPortType" : "In",
                      "typeSpec" : "ZSpline"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "compressionAmt",
                      "execPortType" : "In",
                      "typeSpec" : "Scalar"
                      }
                    ],
                  "extDeps" : {
                    "Math" : "*"
                    },
                  "code" : "dfgEntry {
  result.resize(0);
  for(UInt32 n=0;n<this.BSplines.size();n++){
    for(UInt32 k=0; k<this.BSplines[n].defSegs; k++) {
        Scalar t =  Scalar(k)/ Scalar(Math_max(1,(this.BSplines[n].defSegs-1)));
        Vec3 scale = this.BSplines[n].evalScale(t,0,keepCurveLen);
        if(compressionAmt>0) {
          Scalar compression = this.BSplines[n].evalCompression(t, referenceCurve.BSplines[n]);
          scale = scale*compression.linearInterpolate(1,1-compressionAmt);
        }
        
        Xfo outXfo = Xfo(
                this.BSplines[n].evalPosition(t,keepArcLen,keepCurveLen),
                this.BSplines[n].evalOri(t,keepArcLen,keepCurveLen),
                scale);
        result.push(outXfo);
        
        // export on mid segments
        if(k==0 && n!=0) {
            medianXfos.push(outXfo.linearInterpolate(result[result.size()-2], 0.5));
           // ToDo Export defrobulated Euler Angles on segment Joints
        }
    }
  }
}  "
                  }
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":1235.3,\"y\":324.887}"
                  },
                "name" : "Add_1",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "lhs"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "rhs"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    }
                  ],
                "executable" : "Fabric.Core.Math.Add",
                "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":852.37,\"y\":655.962}"
                  },
                "name" : "convertXfoToMat44",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "xfoArray"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "mat44Array"
                    }
                  ],
                "definition" : {
                  "objectType" : "Func",
                  "title" : "convertXfoToMat44",
                  "ports" : [
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "xfoArray",
                      "execPortType" : "In",
                      "typeSpec" : "Xfo[]"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "In",
                      "name" : "mat44Array",
                      "execPortType" : "Out",
                      "typeSpec" : "Mat44[]"
                      }
                    ],
                  "extDeps" : {},
                  "code" : "dfgEntry {
  for(UInt32 i=0;i<xfoArray.size();i++)
  {
    mat44Array.push(xfoArray[i].toMat44());
  }
}
"
                  }
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":847.92,\"y\":576.005}"
                  },
                "name" : "convertXfoToMat44_2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "xfoArray"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "mat44Array"
                    }
                  ],
                "definition" : {
                  "objectType" : "Func",
                  "title" : "convertXfoToMat44",
                  "ports" : [
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "xfoArray",
                      "execPortType" : "In",
                      "typeSpec" : "Xfo[]"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "In",
                      "name" : "mat44Array",
                      "execPortType" : "Out",
                      "typeSpec" : "Mat44[]"
                      }
                    ],
                  "extDeps" : {},
                  "code" : "dfgEntry {
  for(UInt32 i=0;i<xfoArray.size();i++)
  {
    mat44Array.push(xfoArray[i].toMat44());
  }
}
"
                  }
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":207.0,\"y\":711.0}"
                  },
                "name" : "Convert_2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "size"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "defaultVal"
                    }
                  ],
                "definition" : {
                  "objectType" : "Func",
                  "title" : "Convert[]",
                  "ports" : [
                    {
                      "objectType" : "Port",
                      "nodePortType" : "In",
                      "name" : "result",
                      "execPortType" : "Out",
                      "typeSpec" : "$TYPEOUT$[]"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "size",
                      "execPortType" : "In",
                      "typeSpec" : "UInt32"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "defaultVal",
                      "execPortType" : "In",
                      "typeSpec" : "$TYPE$"
                      }
                    ],
                  "extDeps" : {},
                  "code" : "dfgEntry {
  result.resize(size);
  for(UInt32 i=0;i<size;i++){
     result[i]=defaultVal;
  }
}
"
                  }
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":140.0,\"y\":538.0}"
                  },
                "name" : "Size_1",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "this"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    }
                  ],
                "executable" : "Fabric.Exts.Geometry.Func.Size",
                "presetGUID" : "3426735D9D96DD0F52A2A961A393053A"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":56.0,\"y\":781.0}",
                  "uiCollapsedState" : "0"
                  },
                "name" : "Convert_3",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "size"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "defaultVal"
                    }
                  ],
                "definition" : {
                  "objectType" : "Func",
                  "title" : "Convert[]",
                  "ports" : [
                    {
                      "objectType" : "Port",
                      "nodePortType" : "In",
                      "name" : "result",
                      "execPortType" : "Out",
                      "typeSpec" : "$TYPEOUT$[]"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "size",
                      "execPortType" : "In",
                      "typeSpec" : "UInt32"
                      },
                    {
                      "objectType" : "Port",
                      "nodePortType" : "Out",
                      "name" : "defaultVal",
                      "execPortType" : "In",
                      "typeSpec" : "$TYPE$"
                      }
                    ],
                  "extDeps" : {},
                  "code" : "dfgEntry {
  result.resize(size);
  for(UInt32 i=0;i<size;i++){
     result[i]=defaultVal;
  }
}
"
                  }
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":69.0,\"y\":655.0}",
                  "uiCollapsedState" : "0"
                  },
                "name" : "Size_2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "In",
                    "name" : "this"
                    },
                  {
                    "objectType" : "InstPort",
                    "nodePortType" : "Out",
                    "name" : "result"
                    }
                  ],
                "executable" : "Fabric.Exts.Geometry.Func.Size",
                "presetGUID" : "3426735D9D96DD0F52A2A961A393053A"
                }
              ],
            "connections" : {
              "pelvis" : [
                "assemble.pelvis"
                ],
              "torso" : [
                "assemble.torso"
                ],
              "chest" : [
                "assemble.chest"
                ],
              "upChest" : [
                "assemble.upchest"
                ],
              "neck" : [
                "assemble.neck"
                ],
              "numDeformers" : [
                "Convert_2.defaultVal"
                ],
              "referenceCurve" : [
                "createXfosOnZSpline.referenceCurve"
                ],
              "defaultVal" : [
                "Convert_3.defaultVal"
                ],
              "assemble.result" : [
                "buildZSpline.mat44s",
                "Size_1.this",
                "Size_2.this"
                ],
              "GetEmptyDebugShape2.result" : [
                "DrawCurve.this"
                ],
              "EmptyDrawingHandle.handle" : [
                "GetEmptyDebugShape2.this",
                "DrawAxesInstances.this"
                ],
              "CreateSegs.result" : [
                "DrawCurve.points"
                ],
              "CreateSegs.color" : [
                "DrawCurve.color"
                ],
              "DrawCurve.dummyResult" : [
                "Add_1.lhs"
                ],
              "buildZSpline.result" : [
                "createXfosOnZSpline.this",
                "CreateSegs.this"
                ],
              "DrawAxesInstances.dummyResult" : [
                "Add_1.rhs"
                ],
              "createXfosOnZSpline.result" : [
                "convertXfoToMat44_2.xfoArray",
                "DrawAxesInstances.transforms"
                ],
              "createXfosOnZSpline.medianXfos" : [
                "convertXfoToMat44.xfoArray"
                ],
              "Add_1.result" : [
                "result"
                ],
              "convertXfoToMat44_2.mat44Array" : [
                "outputs"
                ],
              "Convert_2.result" : [
                "buildZSpline.defSegs"
                ],
              "Size_1.result" : [
                "Convert_2.size"
                ],
              "Convert_3.result" : [
                "buildZSpline.resolution"
                ],
              "Size_2.result" : [
                "Convert_3.size"
                ]
              }
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":-131.73,\"y\":925.221}"
            },
          "name" : "assemble_2",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "pelvis"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "torso"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "chest"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "upchest"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "neck"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "metadata" : {
              "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
              "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
              },
            "title" : "asseble",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "pelvis",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "torso",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "chest",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "upchest",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "neck",
                "execPortType" : "In",
                "typeSpec" : "Mat44"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "result",
                "execPortType" : "Out",
                "typeSpec" : "Mat44[]"
                }
              ],
            "extDeps" : {},
            "code" : "dfgEntry {
  result.push(pelvis);
  result.push(torso);
  result.push(chest);
  result.push(upchest);
  result.push(neck);
}
"
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":195.051,\"y\":998.554}"
            },
          "name" : "buildZSpline_2",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "mat44s"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "isSegmentStart"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "clamped"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "weights"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "resolution"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "order"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "closed"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "defSegs"
              }
            ],
          "executable" : "OSS.Exts.Curves.ZSpline.ZSpline",
          "presetGUID" : "1A4FC39528C5CC9C3EF2B16480BD4E7B"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":594.982,\"y\":1538.69}",
            "uiCollapsedState" : "0"
            },
          "name" : "Convert_3",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "size"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "defaultVal"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "title" : "Convert[]",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "result",
                "execPortType" : "Out",
                "typeSpec" : "$TYPEOUT$[]"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "size",
                "execPortType" : "In",
                "typeSpec" : "UInt32"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "defaultVal",
                "execPortType" : "In",
                "typeSpec" : "$TYPE$"
                }
              ],
            "extDeps" : {},
            "code" : "dfgEntry {
  result.resize(size);
  for(UInt32 i=0;i<size;i++){
     result[i]=defaultVal;
  }
}
"
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":464.982,\"y\":1443.69}",
            "uiCollapsedState" : "0"
            },
          "name" : "Size_2",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "executable" : "Fabric.Exts.Geometry.Func.Size",
          "presetGUID" : "3426735D9D96DD0F52A2A961A393053A"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":280.982,\"y\":1497.6}"
            },
          "name" : "Scalar_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 50
                },
              "name" : "value"
              }
            ],
          "executable" : "Fabric.Core.Constants.Scalar",
          "presetGUID" : "E0E96C6E234F70063BC98887B83327DC"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":577.49,\"y\":751.0119999999999}",
            "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
            "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
            "uiCollapsedState" : "0"
            },
          "name" : "createXfosOnZSpline_2",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 0
                },
              "name" : "keepCurveLen"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 1
                },
              "name" : "keepArcLen"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "medianXfos"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "referenceCurve"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 1
                },
              "name" : "compressionAmt"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "metadata" : {
              "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
              "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
              },
            "title" : "createXfosOnZSplineSegments",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "this",
                "execPortType" : "In",
                "typeSpec" : "ZSpline"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "result",
                "execPortType" : "Out",
                "typeSpec" : "Xfo[]"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "defaultValues" : {
                  "Float32" : 0
                  },
                "name" : "keepCurveLen",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "defaultValues" : {
                  "Float32" : 1
                  },
                "name" : "keepArcLen",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "medianXfos",
                "execPortType" : "Out",
                "typeSpec" : "Xfo[]"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "referenceCurve",
                "execPortType" : "In",
                "typeSpec" : "ZSpline"
                },
              {
                "objectType" : "Port",
                "nodePortType" : "Out",
                "name" : "compressionAmt",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                }
              ],
            "extDeps" : {
              "Math" : "*"
              },
            "code" : "dfgEntry {
  result.resize(0);
  for(UInt32 n=0;n<this.BSplines.size();n++){
    for(UInt32 k=0; k<this.BSplines[n].defSegs; k++) {
        Scalar t =  Scalar(k)/ Scalar(Math_max(1,(this.BSplines[n].defSegs-1)));
        Vec3 scale = this.BSplines[n].evalScale(t,0,keepCurveLen);
        if(compressionAmt>0) {
          Scalar compression = this.BSplines[n].evalCompression(t, referenceCurve.BSplines[n]);
          scale = scale*compression.linearInterpolate(1,1-compressionAmt);
        }
        
        Xfo outXfo = Xfo(
                this.BSplines[n].evalPosition(t,keepArcLen,keepCurveLen),
                this.BSplines[n].evalOri(t,keepArcLen,keepCurveLen),
                scale);
        result.push(outXfo);
        
        // export on mid segments
        if(k==0 && n!=0) {
            medianXfos.push(outXfo.linearInterpolate(result[result.size()-2], 0.5));
           // ToDo Export defrobulated Euler Angles on segment Joints
        }
    }
  }
}  "
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":853.814,\"y\":980.4210000000001}"
            },
          "name" : "SetFromMat44_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "this"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "m"
              }
            ],
          "executable" : "Fabric.Exts.Math.Xfo.SetFromMat44",
          "presetGUID" : "59B1B738E9402F3006B2516B14A43848"
          }
        ],
      "connections" : {
        "pelvis" : [
          "assemble.pelvis"
          ],
        "torso" : [
          "assemble.torso"
          ],
        "chest" : [
          "assemble.chest"
          ],
        "upChest" : [
          "assemble.upchest"
          ],
        "neck" : [
          "assemble.neck",
          "SetFromMat44_1.m"
          ],
        "numDeformers" : [
          "Convert_2.defaultVal"
          ],
        "pelvisRest" : [
          "assemble_2.pelvis"
          ],
        "torsoRest" : [
          "assemble_2.torso"
          ],
        "chestRest" : [
          "assemble_2.chest"
          ],
        "upChestRest" : [
          "assemble_2.upchest"
          ],
        "neckRest" : [
          "assemble_2.neck"
          ],
        "assemble.result" : [
          "buildZSpline.mat44s",
          "Size_1.this"
          ],
        "GetEmptyDebugShape2.result" : [
          "DrawCurve.this"
          ],
        "CreateSegs.result" : [
          "DrawCurve.points"
          ],
        "CreateSegs.color" : [
          "DrawCurve.color"
          ],
        "DrawCurve.dummyResult" : [
          "Add_1.lhs"
          ],
        "buildZSpline.result" : [
          "createXfosOnZSpline.this",
          "createXfosOnZSpline_2.this"
          ],
        "convertXfoToMat44.mat44Array" : [
          "outputs"
          ],
        "Convert_2.result" : [
          "buildZSpline.defSegs"
          ],
        "Size_1.result" : [
          "Convert_2.size"
          ],
        "Set_1.this" : [
          "convertXfoToMat44.xfoArray"
          ],
        "Sub_1.result" : [
          "Set_1.index"
          ],
        "UInt32_1.value" : [
          "Sub_1.rhs"
          ],
        "assemble_2.result" : [
          "buildZSpline_2.mat44s",
          "Size_2.this"
          ],
        "buildZSpline_2.result" : [
          "createXfosOnZSpline_2.referenceCurve",
          "ZSplineSpineSolver_1.referenceCurve"
          ],
        "Convert_3.result" : [
          "buildZSpline_2.resolution"
          ],
        "Size_2.result" : [
          "Convert_3.size"
          ],
        "Scalar_1.value" : [
          "Convert_3.defaultVal",
          "ZSplineSpineSolver_1.defaultVal"
          ],
        "createXfosOnZSpline_2.result" : [
          "Set_1.this"
          ],
        "SetFromMat44_1.this" : [
          "Set_1.value"
          ]
        }
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.GetEmptyDebugShape" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
        "uiTooltip" : "helper function to clear a debug drawing shape\n\n Supported by DrawingHandle"
        },
      "title" : "GetEmptyDebugShape",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "exec",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "DrawingHandle"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "defaultValues" : {
            "String" : "debug"
            },
          "name" : "name",
          "execPortType" : "In",
          "typeSpec" : "String"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "InlineDebugShape"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*",
        "FabricInterfaces" : "*"
        },
      "presetGUID" : "DB3916AA2CE58EEAFAEDB9E2653EF4D6",
      "code" : "require InlineDrawing;

dfgEntry {
  result = this.getEmptyDebugShape(name);
}
"
      },
    "OSS.Exts.Curves.ZSpline.createSegsOnZSpline" : {
      "objectType" : "Func",
      "title" : "createSegsOnZSpline",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Vec3[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "this",
          "execPortType" : "In",
          "typeSpec" : "ZSpline"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "color",
          "execPortType" : "Out",
          "typeSpec" : "Color[]"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "D8E844DE0169A7D9BB304C9F8DDF30A2",
      "code" : "dfgEntry {
  result.resize(0);
  color.resize(0);
  for(UInt32 n=0;n<this.BSplines.size();n++){
    BSpline b = this.BSplines[n];
    UInt32 resolution = b.resolution;
    
    // Color Settings
    Scalar hue = mathRandomScalar(n,1);
    Scalar saturation = 2;
    
    for(UInt32 k=0; k<=resolution; k++) {
      Scalar t =  Scalar(k)/(resolution);
      t = (t+n)/(this.BSplines.size());
      Color c = randomColor(hue*180,saturation,this.normalizeT(t));
      result.push(this.evalPosition(t));
      color.push(c);
    }
  }
}
"
      },
    "OSS.Exts.Curves.ZSpline.drawCurve" : {
      "objectType" : "Func",
      "metadata" : {
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
        },
      "title" : "drawCurve",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "points",
          "execPortType" : "In",
          "typeSpec" : "Vec3[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "color",
          "execPortType" : "In",
          "typeSpec" : "Color[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "InlineDebugShape"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "InlineDebugShape"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "dummyResult",
          "execPortType" : "Out",
          "typeSpec" : "Vec3"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "B3D1DFFCE15CC7040DCD73D99F2C3098",
      "code" : "dfgEntry {
  Index firstIndex = this.allocateLines(points.size(), points.size()-1);
  Index colorIndex = firstIndex;
  Vec3Attribute positionsAttr = this.attributes.getOrCreateAttribute('positions', Vec3Attribute);
  Vec3Attribute normalsAttr = this.attributes.getOrCreateAttribute('normals', Vec3Attribute);
  ColorAttribute vertexColorsAttr = this.attributes.getOrCreateColorAttribute('vertexColors');
  

  for( Integer i=0; i<points.size(); i++){
    vertexColorsAttr.values[firstIndex] = color[i];
    positionsAttr.values[firstIndex] = points[i];
    normalsAttr.values[firstIndex++] = this.defaultNormal;
    if(i > 0){
      this.linesIndices[this.linesIndicesOffset++] = firstIndex - 2;
      this.linesIndices[this.linesIndicesOffset++] = firstIndex - 1;
    }
  }

  positionsAttr.incrementVersion();
  normalsAttr.incrementVersion();
  vertexColorsAttr.incrementVersion();

  result = this;
}
"
      },
    "OSS.Exts.Curves.ZSpline.ZSpline" : {
      "objectType" : "Func",
      "metadata" : {
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
        },
      "title" : "ZSpline",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "mat44s",
          "execPortType" : "In",
          "typeSpec" : "Mat44[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "ZSpline"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "isSegmentStart",
          "execPortType" : "IO",
          "typeSpec" : "Boolean[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "clamped",
          "execPortType" : "IO",
          "typeSpec" : "Boolean[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "weights",
          "execPortType" : "IO",
          "typeSpec" : "Scalar[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "resolution",
          "execPortType" : "IO",
          "typeSpec" : "UInt32[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "order",
          "execPortType" : "IO",
          "typeSpec" : "UInt32[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "closed",
          "execPortType" : "IO",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "defSegs",
          "execPortType" : "IO",
          "typeSpec" : "UInt32[]"
          }
        ],
      "extDeps" : {
        "Curves" : "*",
        "Math" : "*"
        },
      "presetGUID" : "1A4FC39528C5CC9C3EF2B16480BD4E7B",
      "code" : "dfgEntry { 
  result.buildZSpline(mat44s, isSegmentStart, weights, order, resolution, defSegs, clamped, closed);
}"
      },
    "OSS.Exts.Curves.ZSpline.createXfosOnZSplineSegments" : {
      "objectType" : "Func",
      "metadata" : {
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
        },
      "title" : "createXfosOnZSplineSegments",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "this",
          "execPortType" : "In",
          "typeSpec" : "ZSpline"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Xfo[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 0
            },
          "name" : "keepCurveLen",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 1
            },
          "name" : "keepArcLen",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "medianXfos",
          "execPortType" : "Out",
          "typeSpec" : "Xfo[]"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "9A8AFEEBF71811F541C71B0877BDF45B",
      "code" : "dfgEntry {
  result.resize(0);
  for(UInt32 n=0;n<this.BSplines.size();n++){
    for(UInt32 k=0; k<this.BSplines[n].defSegs; k++) {
        Scalar t =  Scalar(k)/ Scalar(Math_max(1,(this.BSplines[n].defSegs-1)));
        Xfo outXfo = Xfo(
                this.BSplines[n].evalPosition(t,keepArcLen,keepCurveLen),
                this.BSplines[n].evalOri(t,keepArcLen,keepCurveLen),
                this.BSplines[n].evalScale(t,keepArcLen,keepCurveLen));
        result.push(outXfo);
        
        // export on mid segments
        if(k==0 && n!=0) {
            medianXfos.push(outXfo.linearInterpolate(result[result.size()-2], 0.5));
           // ToDo Export defrobulated Euler Angles on segment Joints
        }
    }
  }
}  "
      },
    "Fabric.Core.Math.Add" : {
      "objectType" : "Func",
      "title" : "Add",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "lhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "rhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7",
      "code" : "
dfgEntry {
	result = lhs + rhs;
}
"
      },
    "Fabric.Exts.Geometry.Func.Size" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Geometry/GeometryAttribute.html",
        "uiTooltip" : "Returns the size of the attribute array.\n\n Supported by GeometryAttribute,GeometryAttributes,BaseAttribute,SkinningAttributeData,Points"
        },
      "title" : "Size",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "this",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Size"
          }
        ],
      "extDeps" : {
        "Geometry" : "*"
        },
      "presetGUID" : "3426735D9D96DD0F52A2A961A393053A",
      "code" : "require Geometry;

dfgEntry {
  result = this.size();
}
"
      },
    "Fabric.Core.Math.Sub" : {
      "objectType" : "Func",
      "title" : "Sub",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "lhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "rhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "F9754B19F43BC017056B8BA291E7B8B4",
      "code" : "
dfgEntry {
	result = lhs - rhs;
}
"
      },
    "Fabric.Core.Constants.UInt32" : {
      "objectType" : "Func",
      "metadata" : {
        "uiAlwaysShowDaisyChainPorts" : "true"
        },
      "title" : "UInt32",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "value",
          "execPortType" : "In",
          "typeSpec" : "UInt32"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "522214488375FF199C3D64A3DBF3C762",
      "code" : "dfgEntry {
}
"
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle" : {
      "objectType" : "Graph",
      "title" : "EmptyDrawingHandle",
      "cacheRule" : "never",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "handle",
          "execPortType" : "Out",
          "typeSpec" : "DrawingHandle"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 894, \"y\": 100}"
            },
          "name" : "Clear",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "this"
              }
            ],
          "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.Clear",
          "cacheRule" : "never"
          },
        {
          "objectType" : "Var",
          "metadata" : {
            "uiGraphPos" : "{\"x\":567.0,\"y\":56.0}",
            "uiCollapsedState" : "0"
            },
          "name" : "handleVar",
          "ports" : [
            {
              "objectType" : "VarPort",
              "nodePortType" : "IO",
              "name" : "value"
              }
            ],
          "dataType" : "DrawingHandle",
          "extDep" : "InlineDrawing:*"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":287.0,\"y\":56.0}"
            },
          "name" : "CreateDrawingHandle",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "handle"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "title" : "Create DrawingHandle",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "handle",
                "execPortType" : "Out",
                "typeSpec" : "DrawingHandle"
                }
              ],
            "extDeps" : {
              "InlineDrawing" : "*"
              },
            "code" : "dfgEntry {
  handle = DrawingHandle();
}
"
            }
          }
        ],
      "connections" : {
        "Clear.this" : [
          "handle"
          ],
        "handleVar.value" : [
          "Clear.this"
          ],
        "CreateDrawingHandle.handle" : [
          "handleVar.value"
          ]
        }
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.Clear" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.0-beta/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
        "uiTooltip" : "removes all contents from the DrawingHandle\n\n Supported by DrawingHandle"
        },
      "title" : "Clear",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "DrawingHandle"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*"
        },
      "code" : "require InlineDrawing;

dfgEntry {
  this.clear();
}
"
      },
    "Fabric.Core.Constants.Scalar" : {
      "objectType" : "Func",
      "metadata" : {
        "uiAlwaysShowDaisyChainPorts" : "true"
        },
      "title" : "Scalar",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "value",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "E0E96C6E234F70063BC98887B83327DC",
      "code" : "dfgEntry {
}
"
      },
    "Fabric.Exts.Math.Xfo.SetFromMat44" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Math/Xfo.html",
        "uiTooltip" : "Sets this transform from a given Mat44\n\n Supported by Xfo"
        },
      "title" : "SetFromMat44",
      "ports" : [
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "Xfo"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "nodePortType" : "Out",
          "name" : "m",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "59B1B738E9402F3006B2516B14A43848",
      "code" : "require Math;

dfgEntry {
  this.setFromMat44(m);
}
"
      }
    }
  }